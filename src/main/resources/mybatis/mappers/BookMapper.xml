<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.team01.book.dao.BookDao">

<!-- 조회 -->
    <select id="selectAllBook" resultType="BookVO">
        select  "bookId",
                "bookName",
                "bookDesc",
                "author",
                "bookPrice",
                "stock",
                "stockStatus",
                "publishDate",
                "roleId",
                "cateId",
                "viewCnt",
                "bookImgPath",
                "writer"
        from book
    </select>


    <insert id="createBook" parameterType="BookVO">
        INSERT INTO BOOK (
        "bookId",
        "bookName",
        "bookDesc",
        "author",
        "bookPrice",
        "stock",
        "stockStatus",
        "publishDate",
        "roleId",
        "cateId",
        "viewCnt",
        "bookImgPath",
        "writer"
        ) VALUES (
        #{bookId},
        #{bookName},
        #{bookDesc},
        #{author},
        #{bookPrice},
        #{stock},
        #{stockStatus},
        #{publishDate},
        #{roleId},
        #{cateId},
        #{viewCnt}
        #{bookImgPath}
        #{writer}
        );

        <!-- BookImage 테이블에 이미지 경로 삽입 -->
        <foreach collection="bookImgPath" item="path" index="index" open="INSERT INTO BookImage (bookId, imagePath) VALUES " separator=" UNION ALL ">
            (#{bookId}, #{path})
        </foreach>
    </insert>

</mapper>


